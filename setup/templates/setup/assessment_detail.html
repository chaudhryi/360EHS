{% extends 'setup/base.html' %}

{% block content %}

<h4>360 Assessment Detail Page for {{ assessment.claimant.full_name }} </h4>
<a class="btn btn-danger btn-sm mt=1 mb=1" href="{% url 'assessments-delete' assessment.id %}">Delete</a>
<a class="btn btn-primary btn-sm mt=1 mb=1" href="{% url 'assessments-update' assessment.id %}">Update</a>
<hr>
    <div class="form-group col-md-12 mb-0">
        <b>Source:</b> {{ assessment.claimant.source }}  
    </div> 
    <div class="form-group col-md-12 mb-0">
        <b>Physician:</b> {{ assessment.doctor }}  
    </div>    
    <div class="form-group col-md-12 mb-0">
        <b>Clinic:</b> {{ assessment.clinic }}
    </div>
    <div class="form-group col-md-12 mb-0">
        <b>Report Type:</b> {{ assessment.report_type }}
    </div>
    <div class="form-group col-md-12 mb-0">
        <b>Agent:</b> {{ assessment.agent }}
    </div>
    <div class="form-group col-md-12 mb-0">
        <b>Claim Number:</b> {{ assessment.claimant.claim_number }}
    </div>
    <div class="form-group col-md-12 mb-0">
        <b>Date:</b> {{ assessment.assessment_date }}
    </div>
    <div class="form-group col-md-12 mb-0">
        <b>Time:</b> {{ assessment.assessment_time }}
    </div>
<hr>

{% if assessment.invoice_number == None %}
    <a class="btn btn-primary btn-sm mt=1 mb=3" href="{% url 'invoices-create' assessment.id assessment.claimant.source.id assessment.report_type.id %}">Create Invoice</a>
    <hr>
{% else %}


    <table class="table table-sm table-striped">
        <thead class="thead-dark">
            <tr>            
                <th scope="col">Invoice#</th>
                <th scope="col">Date</th>
                <th scope="col">Subtotal</th>
                <th scope="col">HST</th>
                <th scope="col">Total</th>
            </tr>
        </thead>
        <tbody>       
            <tr>            
                <td>{{ assessment.invoice_number }}</td>
                <td>{{ assessment.invoice_date }}</td>
                <td>{{ assessment.invoice_subtotal }}</td>
                <td>{{ assessment.invoice_tax }}</td>
                <td>{{ assessment.invoice_total }}</td>
            </tr>
        </tbody>
    </table>


    <table class="table table-sm table-striped">
        <thead class="thead-dark">
            <tr>            
                <th scope="col">Payment</th>
                <th scope="col">Date</th>
                <th scope="col">amount</th>
                <th scope="col">Check No.</th>    
            </tr>
        </thead>
        <tbody>
            {% for item in payments %}       
            <tr>            
                <td>{{ item.assessment.source.name }}</td>
                <td>{{ item.date }}</td>
                <td>{{ item.amount }}</td> 
                <td>{{ item.payment.check_number }}</td>                
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %} 

{% endblock content %}

